import{h as t,k as e,s,j as n,o as i,c as a,w as u,i as l,a as r,b as c,t as o,d as h,r as d,F as p,f,e as v,l as m,I as P,m as I}from"./index-54b82a9c.js";import{_ as g}from"./_plugin-vue_export-helper.1b428a4d.js";
/** 求根
 *
 * @author simumis@hotmail.com
 * @license MIT
 */function x(t,e,s,n,i=null,a=null){if("number"!=typeof e||"number"!=typeof s||"number"!=typeof n)throw new Error("Please check the arguments in fzero.");let u,l,r,c;if(e>s){let t=e;e=s,s=t}let o=t(e);if(Math.abs(o)<n)return c=e,c;let h=t(s);if(Math.abs(h)<n)return c=s,c;if(o<0&&h>0||o>0&&h<0)return function(t,e,s,n){let i,a=e,u=s,l=t(a),r=t(u),c=a,o=l,h=u-a,d=h;for(var p,f,v,m,P,I;;){if(Math.abs(o)<Math.abs(r)&&(a=u,u=c,c=a,l=r,r=o,o=l),p=2*Number.MIN_VALUE*Math.abs(u)+n,f=(c-u)/2,Math.abs(f)<=p||0==r)return i=u,i;Math.abs(d)<p||Math.abs(l)<=Math.abs(r)?(h=f,d=f):(I=r/l,a==c?(v=2*f*I,m=1-I):(v=I*(2*f*(m=l/o)*(m-(P=r/o))-(u-a)*(P-1)),m=(m-1)*(P-1)*(I-1)),v>0?m=-m:v=-v,I=d,d=h,2*v<3*f*m-Math.abs(p*m)&&v<Math.abs(.5*I*m)?h=v/m:(h=f,d=f)),a=u,l=r,Math.abs(h)>p?u+=h:f>0?u+=p:u-=p,r=t(u),(r>0&&o>0||r<0&&o<0)&&(c=a,o=l,h=u-a,d=h)}}(t,e,s,n);if(null==i||"number"!=typeof i){let n=.1*(s-e);for(u=t(i=e),l=i+n,r=t(l);l<s;)Math.abs(u)>Math.abs(r)&&(i=l,u=r),l+=n,r=t(l);Math.abs(u)>Math.abs(h)&&(i=s)}if(null!=a)return function(t,e,s,n){let i,a,u,l;for(;;){if(a=t(s),Math.abs(a)<n)return l=s,l;if(u=e(s),i=s-a/u,Math.abs((i-s)/s)<n)return l=i,l;s=i}}(t,a,i,n);{let a=1e-4*(s-e);if(i-a<e)l=i+a;else if(i+a>s)l=i-a;else{let e=i-a,s=i+a;l=Math.abs(t(e))<Math.abs(t(s))?e:s}return function(t,e,s,n){var i,a,u;for(let l=0;;l++){if(i=t(e),Math.abs(i)<n)return e;if(u=s-(a=t(s))*(s-e)/(a-i),Math.abs((u-s)/s)<n)return u;e=s,s=u}}(t,i,l,n)}}function k(t){const e=[-21.2144006,27.3203819,-6.1059813],s=[.00333333333,1.20666667,1.70333333];let n=t/273.16,i=0;for(let a=0;a<3;a++)i+=e[a]*Math.pow(n,s[a]);return 611.657*Math.exp(i/n)}
/** 根据 DL/T 1027 计算湿空气性质
 *
 * @author simumis@hotmail.com
 * @license MIT
 */
const _=8314.471,b=28.9586,M=18.015268;function C(t){let e,s=t+273.15;if(s<50||s>647.096)throw new Error("输入数值超出有效范围！");return e=s>=273.16?function(t){const e=[0,1167.0521452767,-724213.16703206,-17.073846940092,12020.82470247,-3232555.0322333,14.91510861353,-4823.2657361591,405113.40542057,-.23855557567849,650.17534844798];let s=t/1,n=s+e[9]/(s-e[10]),i=n*n,a=i+e[1]*n+e[2],u=e[3]*i+e[4]*n+e[5],l=e[6]*i+e[7]*n+e[8];s=2*l/(Math.sqrt(u*u-4*a*l)-u);let r=s*s;return r*=r,1e6*r}(s):k(s),e/1e3}function y(t){let e,s=1e3*t;if(t<k(50)||t>22064e3)throw new Error("输入数值超出有效范围！");return e=s>=611.657?function(t){const e=[0,1167.0521452767,-724213.16703206,-17.073846940092,12020.82470247,-3232555.0322333,14.91510861353,-4823.2657361591,405113.40542057,-.23855557567849,650.17534844798];let s=t/1e6,n=Math.sqrt(s),i=Math.sqrt(n),a=n+e[3]*i+e[6],u=e[1]*n+e[4]*i+e[7],l=e[2]*n+e[5]*i+e[8],r=2*l/(-u-Math.sqrt(u*u-4*a*l));return s=e[10]+r,(s-Math.sqrt(s*s-4*(e[9]+e[10]*r)))/2*1}(s):function(t){return x((function(e){return k(e)-t}),50,273.16,1e-6)}(s),e-273.15}function w(t,e){return 1.005*t+e*(2500.9+1.846*t)}function F(t,e,s){return(3.483*e-.001316*1e3*s)/(t+273.15)}function V(t,e){return.622*e/(t-e)}function N(t,e,s){return(e+273.15)/(1e3*t)*(_/b+s*_/M)}const A=g({data:()=>({argPickRange:["干球温度(θ) + 相对湿度(φ)","干球温度(θ) + 含湿量(d)","露点温度(td) + 比焓(h)"],argPickIndex:0,atmosphericPressure:{name:"大气压力",value:"",default:"101.325",unit:"kPa"},inputs:[{name:"干球温度(θ)",value:"",default:"30",unit:"℃"},{name:"相对湿度(φ)",value:"",default:"60",unit:"%"},{name:"含湿量(d)",value:"",default:"0.016",unit:"kg/kg[DA]"},{name:"露点温度(td)",value:"",default:"21.38",unit:"℃"},{name:"比焓(h)",value:"",default:"71.06",unit:"kJ/kg[DA]"}],inputIndex:[{first:0,second:1},{first:0,second:2},{first:3,second:4}],results:[{name:"干球温度(θ)",value:"",unit:"℃"},{name:"相对湿度(φ)",value:"",unit:"%"},{name:"含湿量(d)",value:"",unit:"kg/kg[DA]"},{name:"露点温度(td)",value:"",unit:"℃"},{name:"密度(ρ)",value:"",unit:"kg/m³"},{name:"比焓(h)",value:"",unit:"kJ/kg[DA]"},{name:"水蒸气分压力(pv)",value:"",unit:"kPa"},{name:"水蒸气饱和压力(ps)",value:"",unit:"kPa"},{name:"比容(v)",value:"",unit:"m³/kg[DA]"}],resultIndex:[[2,3,4,5,6,7,8],[1,3,4,5,6,7,8],[0,1,2,3,6,7,8]],storageKey:"__humid_input",notes:["1、本程序依据《工业冷却塔测试规程》(DL/T 1027-2006)所列方法并参考《工程热力学(第三版)》(沈维道等)编制。","2、水蒸气的参数计算依据 IAPWS-IF97 公式。","3、本程序所采用公式基本出自冷却塔测试规程，使用范围有限，所得结果仅供参考。","4、当前暂定温度有效范围为[0℃, 100℃]。"]}),onLoad(){try{let e=t(this.storageKey);e&&4==e.length?(this.argPickIndex=parseInt(e[0]),this.atmosphericPressure.value=e[1],this.inputs[this.inputIndex[this.argPickIndex].first].value=e[2],this.inputs[this.inputIndex[this.argPickIndex].second].value=e[3],this.implCalc()):(this.argPickIndex=0,this.atmosphericPressure.value=this.atmosphericPressure.default,this.inputs[this.inputIndex[0].first].value=this.inputs[this.inputIndex[0].first].default,this.inputs[this.inputIndex[0].second].value=this.inputs[this.inputIndex[0].second].default)}catch(e){console.log(e.message)}},computed:{isReady:function(){let t=this.inputIndex[this.argPickIndex].first,e=this.inputIndex[this.argPickIndex].second;return""!=this.atmosphericPressure.value&&!isNaN(parseFloat(this.atmosphericPressure.value))&&""!=this.inputs[t].value&&!isNaN(parseFloat(this.inputs[t].value))&&""!=this.inputs[e].value&&!isNaN(parseFloat(this.inputs[e].value))}},methods:{onSelect:function(t){let s=this.resultIndex[this.argPickIndex];for(const e of s)this.results[e].value="";e(this.storageKey),this.argPickIndex=parseInt(t.detail.value);let n=this.inputIndex[this.argPickIndex].first,i=this.inputIndex[this.argPickIndex].second;""==this.inputs[n].value&&(this.inputs[n].value=this.inputs[n].default),""==this.inputs[i].value&&(this.inputs[i].value=this.inputs[i].default)},implCalc:function(){let t=parseFloat(this.atmosphericPressure.value),e=this.argPickIndex,n=this.resultIndex[e];switch(e){case 0:{let e,i=parseFloat(this.inputs[this.inputIndex[this.argPickIndex].first].value),u=parseFloat(this.inputs[this.inputIndex[this.argPickIndex].second].value);if(i<0||i>100||u<0||u>100)return s({title:"警告",content:"输入数据超出有效范围！",showCancel:!1}),!1;try{e=C(i)}catch(a){return s({title:"警告",content:a.message,showCancel:!1}),!1}let l,r=u/100*e,c=V(t,r),o=w(i,c),h=F(i,t,r);try{l=y(r)}catch(a){return s({title:"警告",content:a.message,showCancel:!1}),!1}let d=N(t,i,c);this.results[n[0]].value=c.toPrecision(6),this.results[n[1]].value=l.toPrecision(6),this.results[n[2]].value=h.toPrecision(6),this.results[n[3]].value=o.toPrecision(6),this.results[n[4]].value=r.toPrecision(6),this.results[n[5]].value=e.toPrecision(6),this.results[n[6]].value=d.toPrecision(6)}break;case 1:{let e,u=parseFloat(this.inputs[this.inputIndex[this.argPickIndex].first].value),l=parseFloat(this.inputs[this.inputIndex[this.argPickIndex].second].value);if(u<0||u>100)return s({title:"警告",content:"输入数据超出有效范围！",showCancel:!1}),!1;try{e=C(u)}catch(a){return s({title:"警告",content:a.message,showCancel:!1}),!1}let r=t*(i=l)/(.622+i),c=r/e*100;if(c<0||c>100)return s({title:"警告",content:"输入数据超出有效范围！",showCancel:!1}),!1;let o,h=w(u,l),d=F(u,t,r);try{o=y(r)}catch(a){return s({title:"警告",content:a.message,showCancel:!1}),!1}let p=N(t,u,l);this.results[n[0]].value=c.toPrecision(6),this.results[n[1]].value=o.toPrecision(6),this.results[n[2]].value=d.toPrecision(6),this.results[n[3]].value=h.toPrecision(6),this.results[n[4]].value=r.toPrecision(6),this.results[n[5]].value=e.toPrecision(6),this.results[n[6]].value=p.toPrecision(6)}break;case 2:{let e,i=parseFloat(this.inputs[this.inputIndex[this.argPickIndex].first].value),u=parseFloat(this.inputs[this.inputIndex[this.argPickIndex].second].value);try{e=C(i)}catch(a){return s({title:"警告",content:a.message,showCancel:!1}),!1}let l,r=V(t,e),c=function(t,e){return(t-2500.9*e)/(1.005+1.846*e)}(u,r);try{l=C(c)}catch(a){return s({title:"警告",content:a.message,showCancel:!1}),!1}let o=e/l*100;if(c<0||c>100||o<0||o>100)return s({title:"警告",content:"输入数据超出有效范围！",showCancel:!1}),!1;let h=F(c,t,e),d=N(t,c,r);this.results[n[0]].value=c.toPrecision(6),this.results[n[1]].value=o.toPrecision(6),this.results[n[2]].value=r.toPrecision(6),this.results[n[3]].value=h.toPrecision(6),this.results[n[4]].value=e.toPrecision(6),this.results[n[5]].value=l.toPrecision(6),this.results[n[6]].value=d.toPrecision(6)}break;default:return s({title:"警告",content:"输入参数类型错误",showCancel:!1}),!1}var i;return!0},onCalc:function(t){if(this.implCalc()){let t=["","","",""];t[0]=this.argPickIndex.toString(),t[1]=this.atmosphericPressure.value,t[2]=this.inputs[this.inputIndex[this.argPickIndex].first].value,t[3]=this.inputs[this.inputIndex[this.argPickIndex].second].value;try{n(this.storageKey,t)}catch(e){console.log("无法保存输入数据-cleanliness")}}},onClear:function(t){let s=this.inputIndex[this.argPickIndex].first,n=this.inputIndex[this.argPickIndex].second;this.atmosphericPressure.value="",this.inputs[s].value="",this.inputs[n].value="";let i=this.resultIndex[this.argPickIndex];for(const e of i)this.results[e].value="";e(this.storageKey)},onReset:function(t){this.atmosphericPressure.value=this.atmosphericPressure.default;let s=this.inputIndex[this.argPickIndex].first,n=this.inputIndex[this.argPickIndex].second;this.inputs[s].value=this.inputs[s].default,this.inputs[n].value=this.inputs[n].default;let i=this.resultIndex[this.argPickIndex];for(const e of i)this.results[e].value="";e(this.storageKey)}}},[["render",function(t,e,s,n,g,x){const k=f,_=l,b=v,M=m,C=P,y=I;return i(),a(_,{class:"content"},{default:u((()=>[r(k,null,{default:u((()=>[c("输入区域：")])),_:1}),r(_,{class:"input-content"},{default:u((()=>[r(_,{class:"picker-content"},{default:u((()=>[r(_,{class:"picker-hint"},{default:u((()=>[c("请选择：")])),_:1}),r(M,{class:"picker-item",onChange:x.onSelect,value:g.argPickIndex,range:g.argPickRange},{default:u((()=>[c(o(g.argPickRange[g.argPickIndex])+" ",1),r(b,{class:"mark-triangle"},{default:u((()=>[c("▼")])),_:1})])),_:1},8,["onChange","value","range"])])),_:1}),r(_,{class:"input-item"},{default:u((()=>[r(_,{class:"input-name"},{default:u((()=>[c(o(g.atmosphericPressure.name),1)])),_:1}),r(C,{class:"input-val",type:"digit",placeholder:"请输入数据",modelValue:g.atmosphericPressure.value,"onUpdate:modelValue":e[0]||(e[0]=t=>g.atmosphericPressure.value=t)},null,8,["modelValue"]),r(_,{class:"input-unit"},{default:u((()=>[c(o(g.atmosphericPressure.unit),1)])),_:1})])),_:1}),r(_,{class:"input-item"},{default:u((()=>[r(_,{class:"input-name"},{default:u((()=>[c(o(g.inputs[g.inputIndex[g.argPickIndex].first].name),1)])),_:1}),r(C,{class:"input-val",type:"digit",placeholder:"请输入数据",modelValue:g.inputs[g.inputIndex[g.argPickIndex].first].value,"onUpdate:modelValue":e[1]||(e[1]=t=>g.inputs[g.inputIndex[g.argPickIndex].first].value=t)},null,8,["modelValue"]),r(_,{class:"input-unit"},{default:u((()=>[c(o(g.inputs[g.inputIndex[g.argPickIndex].first].unit),1)])),_:1})])),_:1}),r(_,{class:"input-item"},{default:u((()=>[r(_,{class:"input-name"},{default:u((()=>[c(o(g.inputs[g.inputIndex[g.argPickIndex].second].name),1)])),_:1}),r(C,{class:"input-val",type:"digit",placeholder:"请输入数据",modelValue:g.inputs[g.inputIndex[g.argPickIndex].second].value,"onUpdate:modelValue":e[2]||(e[2]=t=>g.inputs[g.inputIndex[g.argPickIndex].second].value=t)},null,8,["modelValue"]),r(_,{class:"input-unit"},{default:u((()=>[c(o(g.inputs[g.inputIndex[g.argPickIndex].second].unit),1)])),_:1})])),_:1})])),_:1}),r(_,{class:"calc"},{default:u((()=>[r(y,{class:"calc-button-main","hover-class":"calc-button-main-hover",onClick:x.onCalc,disabled:!x.isReady},{default:u((()=>[c("开始计算")])),_:1},8,["onClick","disabled"]),r(y,{class:"calc-button-clear","hover-class":"calc-button-clear-hover",onClick:x.onClear},{default:u((()=>[c("清除输入")])),_:1},8,["onClick"]),r(y,{class:"calc-button-reset","hover-class":"calc-button-reset-hover",onClick:x.onReset},{default:u((()=>[c("恢复默认")])),_:1},8,["onClick"])])),_:1}),r(k,null,{default:u((()=>[c("计算结果：")])),_:1}),r(_,{class:"result-content"},{default:u((()=>[r(_,{class:"result-content"},{default:u((()=>[(i(!0),h(p,null,d(g.resultIndex[g.argPickIndex],((t,e)=>(i(),a(_,{class:"result-item",key:e},{default:u((()=>[r(_,{class:"result-name"},{default:u((()=>[r(b,null,{default:u((()=>[c(o(g.results[t].name),1)])),_:2},1024)])),_:2},1024),r(_,{class:"result-val"},{default:u((()=>[r(b,null,{default:u((()=>[c(o(g.results[t].value),1)])),_:2},1024)])),_:2},1024),r(_,{class:"result-unit"},{default:u((()=>[r(b,null,{default:u((()=>[c(o(g.results[t].unit),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),r(k,null,{default:u((()=>[c("相关说明：")])),_:1}),r(_,{class:"notes"},{default:u((()=>[(i(!0),h(p,null,d(g.notes,((t,e)=>(i(),a(_,{class:"notes-item",key:e},{default:u((()=>[r(b,null,{default:u((()=>[c(o(t),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})}]]);export{A as default};
